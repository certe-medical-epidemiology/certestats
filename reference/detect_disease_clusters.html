<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Detect Disease Clusters — detect_disease_clusters • certestats</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Detect Disease Clusters — detect_disease_clusters"><meta property="og:description" content="Detect disease clusters with detect_disease_clusters(). Use has_clusters() to return TRUE or FALSE based on its output, or employ format() to format the result."><meta property="og:image" content="https://certe-medical-epidemiology.github.io/certestats/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">certestats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.24.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

    Home
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book-open"></span>

    Manual
  </a>
</li>
<li>
  <a href="https://github.com/certe-medical-epidemiology/certestats" class="external-link">
    <span class="fab fa-github"></span>

    Source Code
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/certe-medical-epidemiology" class="external-link">
    <span class="fab fa-github"></span>

    Certe Med Epi
  </a>
</li>
<li>
  <a href="https://certe.nl" class="external-link">
    <span class="fa fa-flask"></span>

    Certe Website
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Detect Disease Clusters</h1>
    <small class="dont-index">Source: <a href="https://github.com/certe-medical-epidemiology/certestats/blob/main/R/disease_clusters.R" class="external-link"><code>R/disease_clusters.R</code></a></small>
    <div class="hidden name"><code>detect_disease_clusters.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Detect disease clusters with <code>detect_disease_clusters()</code>. Use <code>has_clusters()</code> to return <code>TRUE</code> or <code>FALSE</code> based on its output, or employ <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code> to format the result.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">detect_disease_clusters</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  column_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  column_patientid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  based_on_historic_maximum <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  period_length_months <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  minimum_cases <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  minimum_days <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  minimum_case_days <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  minimum_case_fraction_in_period <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  threshold_percentile <span class="op">=</span> <span class="fl">97.5</span>,</span>
<span>  remove_outliers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_outliers_coefficient <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  moving_average_days <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  moving_average_side <span class="op">=</span> <span class="st">"left"</span>,</span>
<span>  case_free_days <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">n_clusters</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_clusters</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_ongoing_cluster</span><span class="op">(</span><span class="va">x</span>, dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_cluster_before</span><span class="op">(</span><span class="va">x</span>, <span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_cluster_after</span><span class="op">(</span><span class="va">x</span>, <span class="va">date</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>Data set: This must consist of <strong>only positive results</strong>. The minimal data set should include a date column and a patient column. Do not summarize on patient IDs; this will be handled automatically.</p></dd>


<dt id="arg-column-date">column_date<a class="anchor" aria-label="anchor" href="#arg-column-date"></a></dt>
<dd><p>Name of the column to use for dates. If left blank, the first date column will be used.</p></dd>


<dt id="arg-column-patientid">column_patientid<a class="anchor" aria-label="anchor" href="#arg-column-patientid"></a></dt>
<dd><p>Name of the column to use for patient IDs. If left blank, the first column resembling <code>"patient|patid"</code> will be used.</p></dd>


<dt id="arg-based-on-historic-maximum">based_on_historic_maximum<a class="anchor" aria-label="anchor" href="#arg-based-on-historic-maximum"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> to indicate whether the cluster detection should be based on the maximum of previous years. The default is <code>FALSE</code>, which uses all historic data points.</p></dd>


<dt id="arg-period-length-months">period_length_months<a class="anchor" aria-label="anchor" href="#arg-period-length-months"></a></dt>
<dd><p>Number of months per period.</p></dd>


<dt id="arg-minimum-cases">minimum_cases<a class="anchor" aria-label="anchor" href="#arg-minimum-cases"></a></dt>
<dd><p>Minimum number of <em>cases</em> that a cluster requires to be considered a cluster.</p></dd>


<dt id="arg-minimum-days">minimum_days<a class="anchor" aria-label="anchor" href="#arg-minimum-days"></a></dt>
<dd><p>Minimum number of <em>days</em> that a cluster requires to be considered a cluster.</p></dd>


<dt id="arg-minimum-case-days">minimum_case_days<a class="anchor" aria-label="anchor" href="#arg-minimum-case-days"></a></dt>
<dd><p>Minimum number of <em>days with cases</em> that a cluster requires to be considered a cluster.</p></dd>


<dt id="arg-minimum-case-fraction-in-period">minimum_case_fraction_in_period<a class="anchor" aria-label="anchor" href="#arg-minimum-case-fraction-in-period"></a></dt>
<dd><p>Minimum fraction of <em>cluster cases in a period</em> that a cluster requires to be considered a cluster.</p></dd>


<dt id="arg-threshold-percentile">threshold_percentile<a class="anchor" aria-label="anchor" href="#arg-threshold-percentile"></a></dt>
<dd><p>Threshold to set.</p></dd>


<dt id="arg-remove-outliers">remove_outliers<a class="anchor" aria-label="anchor" href="#arg-remove-outliers"></a></dt>
<dd><p>A <a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> to indicate whether outliers should be removed before determining the threshold.</p></dd>


<dt id="arg-remove-outliers-coefficient">remove_outliers_coefficient<a class="anchor" aria-label="anchor" href="#arg-remove-outliers-coefficient"></a></dt>
<dd><p>Coefficient used for outlier determination.</p></dd>


<dt id="arg-moving-average-days">moving_average_days<a class="anchor" aria-label="anchor" href="#arg-moving-average-days"></a></dt>
<dd><p>Number of days to set in <code><a href="moving_average.html">moving_average()</a></code>. Defaults to a whole week (<code>7</code>).</p></dd>


<dt id="arg-moving-average-side">moving_average_side<a class="anchor" aria-label="anchor" href="#arg-moving-average-side"></a></dt>
<dd><p>Side of days to set in <code><a href="moving_average.html">moving_average()</a></code>. Defaults to <code>"left"</code> for retrospective analysis.</p></dd>


<dt id="arg-case-free-days">case_free_days<a class="anchor" aria-label="anchor" href="#arg-case-free-days"></a></dt>
<dd><p>Number of days to set in <code><a href="https://amr-for-r.org/reference/get_episode.html" class="external-link">get_episode()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>not used at the moment</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>output of <code>detect_disease_clusters()</code></p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>number of clusters, defaults to 1</p></dd>


<dt id="arg-dates">dates<a class="anchor" aria-label="anchor" href="#arg-dates"></a></dt>
<dd><p>date(s) to test whether any of the clusters currently has this date in it, defaults to yesterday.</p></dd>


<dt id="arg-date">date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>date to test whether there are any clusters since or until this date.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>A (disease) cluster is defined as an unusually large aggregation of disease events in time or space (<a href="https://www.atsdr.cdc.gov/hec/csem/cluster/docs/clusters.pdf" class="external-link">ATSDR, 2008</a>). They are common, particularly in large populations. From a statistical standpoint, it is nearly inevitable that some clusters of chronic diseases will emerge within various communities, be it schools, church groups, social circles, or neighborhoods. Initially, these clusters are often perceived as products of specific, predictable processes rather than random occurrences in a particular location, akin to a coin toss.</p>
<p>Whether a (suspected) cluster corresponds to an actual increase of disease in the area, needs to be assessed by an epidemiologist or biostatistician (<a href="https://www.atsdr.cdc.gov/hec/csem/cluster/docs/clusters.pdf" class="external-link">ATSDR, 2008</a>).</p>
<p>The function <code>has_ongoing_cluster()</code> returns a <a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> vector with the same length as <code>dates</code>, so <code>dates</code> can have any length.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="detect_biomarker_changes.html">detect_biomarker_changes()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                      <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-12-31"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                      <span class="st">"1 day"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  size <span class="op">=</span> <span class="fl">300</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    patient <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">LETTERS</span>, size <span class="op">=</span> <span class="fl">300</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># -----------------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">check</span> <span class="op">&lt;-</span> <span class="fu">detect_disease_clusters</span><span class="op">(</span><span class="va">cases</span>, threshold_percentile <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using column 'date' for dates</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using column 'patient' for patient IDs</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">has_clusters</span><span class="op">(</span><span class="va">check</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="va">check</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> =&gt; Detected no disease clusters over the last 12-month period</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">&lt;-</span> <span class="fu">detect_disease_clusters</span><span class="op">(</span><span class="va">cases</span>,</span></span>
<span class="r-in"><span>                                  minimum_cases <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                  threshold_percentile <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using column 'date' for dates</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using column 'patient' for patient IDs</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">check2</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> =&gt; Detected 5 disease clusters over the last 12-month period with a total of 19</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> cases.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Disease Clusters</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> These disease clusters were found:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 1. Between 24 januari and 6 februari 2022: <span style="font-weight: bold;">6 cases</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2. Between 9 and 29 maart 2022: <span style="font-weight: bold;">3 cases</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3. Between 29 juni and 19 juli 2022: <span style="font-weight: bold;">5 cases</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 4. Between 15 and 30 augustus 2022: <span style="font-weight: bold;">3 cases</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 5. Between 24 and 30 december 2022: <span style="font-weight: bold;">2 cases</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Parameters Used</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • based_on_historic_maximum: FALSE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • minimum_case_days: 2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • minimum_case_fraction_in_period: 0.02</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • minimum_cases: 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • minimum_days: 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • moving_average_days: 7</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • period_length_months: 12</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • remove_outliers: TRUE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • remove_outliers_coefficient: 1.5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • threshold_percentile: 75</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Summary</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> In total <span style="font-weight: bold;">19 cases</span> between 24 januari and 30 december 2022, spread over 5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> cluster(s).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Use `plot2::plot2()` to plot the results.</span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cluster first_day  last_day   first_day_in_period last_day_in_period cases</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>       1 2022-01-24 2022-02-06                  25                 38     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>       2 2022-03-09 2022-03-29                  69                 89     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>       3 2022-06-29 2022-07-19                 181                201     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>       4 2022-08-15 2022-08-30                 228                243     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>       5 2022-12-24 2022-12-30                 359                365     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: days &lt;int&gt;, case_days &lt;int&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">n_clusters</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">has_clusters</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">has_clusters</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">has_ongoing_cluster</span><span class="op">(</span><span class="st">"2022-06-01"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">has_ongoing_cluster</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2022-06-01"</span>, <span class="st">"2022-06-20"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE FALSE</span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">has_cluster_before</span><span class="op">(</span><span class="st">"2022-06-01"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu">has_cluster_after</span><span class="op">(</span><span class="st">"2022-06-01"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">check2</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $clusters</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 79 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    date       cases cluster day_in_period  days case_days</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-01-24     1       1            25     1         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-01-25     0       1            <span style="color: #BB0000;">NA</span>     2         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-01-26     0       1            <span style="color: #BB0000;">NA</span>     3         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-01-27     1       1            28     4         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-01-28     0       1            <span style="color: #BB0000;">NA</span>     5         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-01-29     1       1            30     6         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-01-30     0       1            <span style="color: #BB0000;">NA</span>     7         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-01-31     0       1            <span style="color: #BB0000;">NA</span>     8         3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-02-01     1       1            33     9         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-02-02     0       1            <span style="color: #BB0000;">NA</span>    10         4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 69 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $details</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2,915 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year date       period_date day_in_period period cases moving_avg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>015 2015-01-07 2000-01-07              1      7     1      1    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">2</span>015 2015-01-08 2000-01-08              2      7     0      0.5  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>015 2015-01-09 2000-01-09              3      7     0      0.333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>015 2015-01-10 2000-01-10              4      7     0      0.25 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>015 2015-01-11 2000-01-11              5      7     0      0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>015 2015-01-12 2000-01-12              6      7     0      0.167</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>015 2015-01-13 2000-01-13              7      7     1      0.286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>015 2015-01-14 2000-01-14              8      7     0      0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>015 2015-01-15 2000-01-15              9      7     0      0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>015 2015-01-16 2000-01-16             10      7     0      0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2,905 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3 more variables: moving_avg_max &lt;dbl&gt;, moving_avg_pctile &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   moving_avg_limit &lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"threshold_percentile")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"based_on_historic_maximum")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"remove_outliers")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"remove_outliers_coefficient")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"moving_average_days")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"minimum_cases")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"minimum_days")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"minimum_case_days")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"minimum_case_fraction_in_period")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"period_length_months")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 12</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot the results</span></span></span>
<span class="r-in"><span><span class="co"># check2 |&gt; plot2()</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthijs S. Berends, Erwin Dijkstra, Certe Medical Diagnostics &amp; Advice Foundation.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

