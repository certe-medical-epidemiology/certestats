% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/early_warning.R
\name{early_warning_biomarker}
\alias{early_warning_biomarker}
\title{Early Warning for Biomarkers}
\usage{
early_warning_biomarker(
  df,
  testcode = NULL,
  ...,
  column_date = NULL,
  column_patientid = NULL,
  column_testcode = NULL,
  column_testresult = NULL,
  threshold_min = NULL,
  threshold_max = NULL,
  window_days = NULL,
  max_delta_absolute = NULL,
  max_delta_relative = NULL,
  direction = "any"
)
}
\arguments{
\item{df}{A data frame containing clinical chemistry data with columns for patient ID, date, test code, and test result.}

\item{testcode}{Value of the column containing test codes to filter on.}

\item{...}{Filter arguments, e.g. \code{testcode == "eGFR"}}

\item{column_date}{Name of the column to use for dates. If left blank, the first date column will be used.}

\item{column_patientid}{Name of the column to use for patient IDs. If left blank, the first column resembling \code{"patient|patid"} will be used.}

\item{column_testcode}{Name of the column containing test codes.}

\item{column_testresult}{Name of the column containing test results.}

\item{threshold_min}{Minimum threshold for biomarkers.}

\item{threshold_max}{Maximum threshold for biomarkers.}

\item{window_days}{Number of days for the time window to check for changes.}

\item{max_delta_absolute}{Maximum allowable absolute change in biomarkers.}

\item{max_delta_relative}{Maximum allowable relative change in biomarkers.}

\item{direction}{Direction of change to check ("up", "down", or "any").}
}
\value{
A list with the following components:
\itemize{
\item \code{flags}: A list of flags per patient, containing data frames for each patient with details on dates, test codes, test results, and flagging criteria. The structure of each data frame includes the following columns:
\itemize{
\item \code{patient}: Patient identifier.
\item \code{date}: Date of the biomarker measurement.
\item \code{testcode}: Code of the biomarker test.
\item \code{testresult}: Biomarker test result.
\item \code{delta_absolute}: Absolute change in biomarker values.
\item \code{delta_relative}: Relative change in biomarker values.
\item \code{threshold_min_flag}: A logical flag indicating if the threshold minimum is exceeded.
\item \code{threshold_max_flag}: A logical flag indicating if the threshold maximum is exceeded.
\item \code{delta_absolute_flag}: A logical flag indicating if the absolute change exceeds the threshold.
\item \code{delta_relative_flag}: A logical flag indicating if the relative change exceeds the threshold.
}
\item \code{details}: A data frame containing all patient details and calculated flags, regardless of whether they meet the flagging criteria. The data frame includes the same columns as the individual patient data frames.
}
}
\description{
The \code{early_warning_biomarker} function is designed to detect unexpected changes in biomarker values for individual patients based on clinical chemistry data. It will flag cases where patients' biomarker results deviate from defined thresholds or exhibit significant changes within a specified time window.
}
\details{
\emph{This whole function, including the documentation, was written by ChatGPT 3.5 in October 2023. Only minor changes were applied manually.}

This function is particularly useful in early detection of anomalous biomarker results, which can be indicative of health issues or treatment response. By providing detailed flags, it allows healthcare professionals and researchers to take timely action, conduct further investigations, or make informed clinical decisions.

The output of this function can be utilised for:
\itemize{
\item Generating patient-specific reports for healthcare providers.
\item Identifying trends and patterns in biomarker changes for research purposes.
\item Enhancing patient care by enabling proactive interventions when necessary.
\item Supporting data-driven clinical epidemiology studies and research.
}

The \code{\link[=format]{format()}} function allows you to format the results of the \code{early_warning_biomarker()} function for better readability and analysis. It organises the flag information into a structured data frame for easier inspection.
}
\examples{
data <- data.frame(date = Sys.Date() + 1:10,
                   patient = "test",
                   value = c(10,12,14,15,13,21,22,19,14,12))

check <- data |> early_warning_biomarker(window_days = 6, max_delta_absolute = 10)

check

unlist(check)
}
\seealso{
\code{\link[=early_warning_cluster]{early_warning_cluster()}}
}
